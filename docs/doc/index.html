<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>MapIFrameAPI Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">

	<link type="text/css" rel="stylesheet" href="index.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">MapIFrameAPI</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">API<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="api.html">api</a></li><li><a href="MapIFrameAPI.html">MapIFrameAPI</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="events.list.html" class="dropdown-toggle" data-toggle="dropdown">Events<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="api.html#.event:button">api.event:button</a></li><li><a href="api.html#.event:edit">api.event:edit</a></li><li><a href="api.html#.event:move">api.event:move</a></li><li><a href="api.html#.event:step">api.event:step</a></li><li><a href="api.html#.event:select:show">api.select:show</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#connect">connect</a></li>
				</ul>
			</li>
			
		</ul>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-8">
	
		<div id="main">
			

	
	











	
	





    <section class="readme-section">
        <article><h1>Macarte iFrameAPI</h1>
<p>Macarte iFrameAPI vous permet d'int√©grer un widget d'une carte produite sur le site <a href="https://macarte.ign.fr">Ma carte</a> sur votre site Web et de le contr√¥ler √† l'aide de JavaScript.<br>
L'int√©gration des cartes se fait via une balise <code>&lt;iframe&gt;</code>, la configuration de la carte se fait simplement, de mani√®re interactive sur le site <a href="https://macarte.ign.fr">Ma carte</a>.</p>
<p>Les fonctions de l'API JavaScript vous permettent d'afficher une carte, de controler sa position et son contenu et de r√©cup√©rer des informations li√©es √† cette carte. Vous pouvez √©galement ajouter des √©couteurs d'√©v√©nements qui s'ex√©cutent en r√©ponse √† certains √©v√©nements d√©clench√©s sur la carte tels qu'un d√©placement ou une s√©lection d'objet par exemple.</p>
<p>Ce guide d√©crit le fonctionnement de l'iFrame API. Il pr√©sente les diff√©rents types d'√©v√©nements que l'API peut envoyer et explique comment d√©finir des √©couteurs d'√©v√©nements pour y r√©pondre. Il pr√©sente √©galement en d√©tail les diff√©rentes fonctions JavaScript que vous pouvez appeler pour contr√¥ler la carte, ainsi que les param√®tres de la carte que vous pouvez utiliser pour la personnaliser.</p>
<h2>üõ†Ô∏è Configuration requise</h2>
<p>L'utilisateur final doit utiliser un navigateur compatible avec la fonctionnalit√© <code>postMessage</code> de HTML5. Les navigateurs les plus r√©cents sont compatibles avec <code>postMessage</code>.</p>
<p>La taille de la fen√™tre d'affichage des cartes int√©gr√©s doit √™tre suffisante pour que celle-ci s'affiche correctement.</p>
<p>Les pages Web qui utilisent l'iFrameAPI doivent √©galement mettre en ≈ìuvre la fonction JavaScript permettant de r√©cup√©rer l'API : <a href="MapIFrameAPI.html#ready">MapIFrameAPI.ready</a>.
Cette fonction permet de r√©cup√©rer l'API lorsque la carte a termin√© de se charger, ce qui vous permet de l'utiliser sur votre page.</p>
<h2>üìú Premiers pas</h2>
<p>L'exemple de page HTML ci-dessous permet d'afficher une carte int√©gr√©e et de r√©cup√©rer l'API associ√©e √† cette carte. Les commentaires num√©rot√©s dans le code HTML sont expliqu√©s dans la liste apparaissant sous l'exemple.</p>
<pre class="prettyprint source lang-html"><code>&lt;!DOCTYPE html>
&lt;html>
  &lt;head>
    &lt;title>Ma carte&lt;/title>
    &lt;!-- 1. Charger le code de l'API -->
    &lt;script type=&quot;text/javascript&quot; src=&quot;https://macarte.ign.fr/carte/MapIFrameAPI.js&quot;>&lt;/script>
  &lt;/head>

  &lt;body>
    &lt;!-- 2. &lt;iframe> qui va contenir la carte a afficher -->
    &lt;iframe id=&quot;map&quot; src=&quot;https://macarte.ign.fr/carte/MAP_ID/CARTE_TITLE&quot; width=&quot;100%&quot; height=&quot;480px&quot; allow=&quot;geolocation clipboard-read clipboard-write&quot;>&lt;/iframe>
    &lt;script>
    // Variable globale
    var mapAPI = null;
    // 3. R√©cup√©ration de l'API lorsque la carte est charg√©e
    MapIFrameAPI.ready('map', function(api) {
      // 4. R√©cup√©ration de l'API pour un acc√®s global
      mapAPI = api;
      // 5. Center la carte sur Paris
      mapAPI.setCenter([2.33, 48.85]);
      // 6. Placer un √©couteur pour r√©cup√©rer les objets s√©lectionn√©s
      mapAPI.on('select', function(sel) {
        console.log(sel);
      })
    })
    &lt;/script>
  &lt;/body>
&lt;/html>
</code></pre>
<p>Cet exemple de code est expliqu√© plus en d√©tail dans la liste ci-dessous :</p>
<ol>
<li>La ligne qui suit permet de charger le code de l'API afin de pouvoir l'utiliser sur votre page. Il expose la variable <a href="MapIFrameAPI.html">MapIFrameAPI</a>.</li>
<li>La balise <code>&lt;iframe&gt;</code> permet d'ins√©rer une carte sur votre page web √† l'emplacement que vous avez choisi.<br>
<code>MAP_ID</code> correspond √† l'identifiant de publication de la carte que vous voulez int√©grer. Vous devez donc au pr√©alable avoir cr√©er la carte √† afficher sur le site <a href="https://macarte.ign.fr">Ma carte</a>.</li>
<li>La fonction <a href="MapIFrameAPI.html#ready">MapIFrameAPI.ready</a> permet d'√™tre inform√© lorsque la carte est charg√©e et que l'API est pr√®te √† √™tre utilis√©e.<br>
Elle prend 2 arguments :
<ul>
<li>le premier argument indique l'iframe sur laquelle il faut brancher l'API. C'est soit l'√©l√©ment lui m√™me soit son identifiant.</li>
<li>le second argument est une fonction de rappel qui sera ex√©cut√©e lorsque l'API est disponible, et qui transmet la variable d'API √† utiliser par la suite.</li>
</ul>
</li>
<li>La ligne suivante permet de sauvegarder l'API dans une variable globale pour y avoir acc√®s plus simplement (facultatif)</li>
<li>La fonction <code>setCenter</code> de l'API permet de centrer la carte √† une longitude, latitude donn√©e. Dans l'exemple, on se centre sur Paris.</li>
<li>A la ligne suivante, nous allons brancher un √©couteur pour √™tre averti lorsqu'un objet est s√©lectionn√©. Le premier argument est le type d'√©v√®nement qu'on √©coute (<code>select</code>), le second une fonction qui renvoit un tableau d'objet s√©lectionn√© au format GeoJSON.</li>
</ol>
<h2>‚å®Ô∏è Fonctionnalit√©s</h2>
<h3>R√©cup√©ration de l'API</h3>
<p>Vous devez r√©cup√©rer l'API au moyen de la m√©thode <a href="MapIFrameAPI.html#ready">MapIFrameAPI.ready</a> en lui indiquant l'iFrame sur laquelle on veut se brancher et qui en retour vous renverra l'API √† utiliser par la-suite (not√©e <code>mapAPI</code> dans la suite).</p>
<h3>Utilisation de l'API</h3>
<p>Pour communiquer avec l'iFrame, utilisez les <a href="api.html">fonctionnalit√©s disponibles dans l'API</a>.</p>
<p>Elles sont de la forme <code>functionality(options)</code> ou si on attend une r√©ponse <code>functionality([options], callback)</code>. Callback est une fonction de rapelle qui transmettra l'information, dans ce cas les options sont facultatives et peuvent ne pas √™tre demand√©es.</p>
<p>Il est √©galement possible de brancher des √©couteurs pour √™tre inform√© lorsqu'un √©v√®nement se produit sur la carte au moyen de la m√©thode <a href="api.html#on">on</a>. Vous pouvez d√©brancher un √©couteur √† l'aide de <a href="api.html#un">un</a>.</p></article>
    </section>







		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div class="search-doc  col-md-3">
				<input id="toc-search" type="search" placeholder="search..." />
			</div>
			<div id="toc" class="col-md-3 hidden-xs hidden-sm hidden-md"></div>
		</div>
	

</div>
</div>



<footer>


	<span class="copyright">
	IGN &copy; DSI/SDM/RDS
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a>
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>
<script src="index.js"></script>



<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : false,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->




</body>
</html>